load("//bazel:api.bzl", "mojo_library")

package(default_visibility = ["//max:consumers"])

mojo_library(
    name = "shmem",
    srcs = glob(["**/*.mojo"]),
    additional_compiler_inputs = ["@nvshmem_prebuilt//:device"],
    copts = [
        "--bitcode-libs",
        "$(location @nvshmem_prebuilt//:device)",
    ],
    data = ["@nvshmem_prebuilt//:host"],
    validate_missing_docs = False,
    deps = [
        "//max:layout",
        "@mojo//:stdlib",
    ],
)
