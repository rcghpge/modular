##===----------------------------------------------------------------------===##
# Copyright (c) 2025, Modular Inc. All rights reserved.
#
# Licensed under the Apache License v2.0 with LLVM Exceptions:
# https://llvm.org/LICENSE.txt
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
##===----------------------------------------------------------------------===##

# Base Pipeline Configuration
# This is a base configuration that can be inherited by other configurations.
# It contains the default values for all MAXConfig classes.

# NOTE: THIS IS A WORK IN PROGRESS - (default) config values here may be incorrect
# incomplete and/or not parsed in any codepath yet!

# --------------- START MAXConfigs ------------------------------ #

# KV Cache Configuration - matches fields in KVCacheConfig
kv_cache_config:
  cache_strategy: paged
  kv_cache_page_size: 512
  enable_prefix_caching: true
  device_memory_utilization: 0.85

# Sampling Configuration - matches fields in SamplingConfig  
sampling_config:
  in_dtype: float16
  out_dtype: float32
  enable_structured_output: true
  enable_variable_logits: false
  do_penalties: true
  enable_min_tokens: false

# Profiling Configuration - matches fields in ProfilingConfig
profiling_config:
  gpu_profiling_mode: off

# LoRA Configuration - matches fields in LoRAConfig
lora_config:
  lora_paths:
    - "/models/lora/task_specific_adapter"
    - "/models/lora/domain_adapter" 
  max_lora_rank: 32
  max_num_loras: 50

# Example future config section (would be auto-discovered if the class exists)
# pipeline_config:
#   engine: None
#   max_length: 2048
#   batch_size: 32

# Example sampling parameters with field metadata
# sampling_params:
#   top_k: 1
#   top_p: 1.0
#   min_p: 0.05
#   temperature: 0.7
#   frequency_penalty: 0.0
#   presence_penalty: 0.0
#   ignore_eos: false
#   max_new_tokens: 
#     value: null
#     dtype: int
#     description: "Maximum number of new tokens to generate"
#   seed:
#     value: 42
#     dtype: int
#     tags:
#       - "randomization"
#       - "reproducibility" 
#     docstring: "The seed to use for the random number generator"

# Alternative metadata format examples:
# seed: 42
# seed_dtype: int
# seed_tags: ["randomization", "reproducibility"]
# seed_docstring: "The seed to use for the random number generator" 